<body>
  <div class="slider-container">
    <input type="range" min="-1" max="1" value="0" step="0.1" class="slider" id="slider">
  </div>
  <p id="display">
    
  </p>
</body>
<script>
  
  const slider = document.getElementById("slider");
  const display = document.getElementById("display");

  async function start () {
      const audioContext = new AudioContext();
      console.log("before");
      await audioContext.audioWorklet.addModule("white-noise-processor.js");
      console.log("after");
      const whiteNoiseNode = new AudioWorkletNode(
        audioContext,
        "white-noise-processor",
      );
      whiteNoiseNode.connect(audioContext.destination);
      slider.addEventListener("input", () => {
        display.innerText = slider.value;
        const gainParam = whiteNoiseNode.parameters.get("customGain");
        gainParam.setValueAtTime(0, slider.value);
      })
  }

  // function change (whiteNoiseNode, audioContext) {
  //   console.log("ran");
  //   const gainParam = whiteNoiseNode.parameters.get("customGain");
  //   console.log(gainParam);
  //   gainParam.setValueAtTime(0, audioContext.currentTime);
  //   gainParam.linearRampToValueAtTime(0.5, audioContext.currentTime + 0.5);
  // }

  document.addEventListener("click", start);

</script>
